<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Game of Life Sequencer</title>
    <link rel="icon" />
    <link rel="stylesheet" href="./lib/bootstrap.min.css" />
    <script src="./lib/popper.min.js"></script>
    <script src="./lib/bootstrap.min.js"></script>
    <script src="./lib/Tone.js"></script>
    <script src="./lib/tone-ui.js"></script>
    <script src="./lib/components.js"></script>
    <style>
      /* for the icons */
      #play-toggle {
        font-family: Arial;
      }
    </style>
  </head>
  <body>
    <div class="container py-4">
      <div class="row mb-3">
        <div class="col d-grid">
          <button
            type="button"
            class="btn btn-primary"
            id="play-toggle"
            title="Play"
          >
            â–¶
          </button>
        </div>
      </div>
      <div class="row mb-3 align-items-center">
        <div class="col">
          <label for="bpm" class="form-label">Tempo</label>
          <input
            type="range"
            class="form-range"
            id="bpm"
            min="60"
            max="240"
            value="240"
          />
        </div>
      </div>

      <div class="row mb-3">
        <div class="col d-flex flex-wrap align-items-center gap-3">
          <button id="clear" class="btn btn-outline-danger">Clear</button>

          <div class="form-check">
            <input class="form-check-input" type="checkbox" id="metronome" />
            <label class="form-check-label" for="metronome">Metronome</label>
          </div>

          <div class="form-check">
            <input
              class="form-check-input"
              type="checkbox"
              id="evolve"
              checked
            />
            <label class="form-check-label" for="evolve">Evolve</label>
          </div>

          <div class="input-group" style="width: auto">
            <label class="input-group-text" for="evolve-every"
              >Evolve every</label
            >
            <select id="evolve-every" class="form-select">
              <option value="1">1</option>
              <option value="2">2</option>
              <option value="4">4</option>
              <option value="8">8</option>
              <option value="16" selected>16</option>
              <option value="32">32</option>
              <option value="64">64</option>
            </select>
            <span class="input-group-text">steps</span>
          </div>

          <div class="input-group" style="width: auto">
            <label class="input-group-text">Load pattern</label>
            <div id="patterns" class="dropdown">
              <button
                class="btn btn-secondary dropdown-toggle"
                type="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
              >
                Select a pattern
              </button>
              <ul class="dropdown-menu"></ul>
            </div>
          </div>
        </div>
      </div>

      <div class="row mb-4">
        <div class="col">
          <tone-step-sequencer rows="12"></tone-step-sequencer>
        </div>
      </div>

      <div class="row mb-4">
        <div class="col">
          <input
            type="button"
            id="log-pattern"
            value="Print grid to console"
            class="btn btn-secondary"
          />
        </div>
      </div>

      <div class="row">
        <div class="col">
          <div class="card">
            <div class="card-body">
              <h5 class="card-title">Game of Life Sequencer</h5>
              <p class="card-text">
                This is a step sequencer that uses the algorithm of
                <a
                  target="_blank"
                  href="https://en.wikipedia.org/wiki/Conway%27s_Game_of_Life"
                  >John Conway's Game of Life</a
                >
                to generate evolving patterns.
              </p>

              <p class="card-text">
                The top four rows are a sawtooth synth, the middle four are drum
                samples and the bottom four are a sine synth.<br />
                Clicking on cells will toggle their state, allowing to make live
                changes to the sequence.<br />
                At first glance it might sound pretty random, but after some
                playing around I find it interesting to listen to "natural"
                developments. For example, sometimes periods of calmness or
                minimal percussion will start. At some point, the "song" will
                die out on its own.<br />
                Often, there will be gradual changes of melody or beat where you
                can hear existing patterns repeating but slowly changing with
                every new bar. This is especially noticeable with longer evolve
                intervals (16 and above).
              </p>
              <p class="card-text">
                Made by Gilad Mayani.<br />
                The sequencer was made using the
                <a target="_blank" href="https://tonejs.github.io/">Tone.js</a>
                framework, also using
                <a target="_blank" href="https://github.com/Tonejs/ui/"
                  >Tone.js UI</a
                >
                components and some
                <a target="_blank" href="https://github.com/Tonejs/audio"
                  >audio samples</a
                >
                from their examples.<br />
                The image of the patterns was found
                <a
                  target="_blank"
                  href="https://blog.xojo.com/2022/05/11/conways-game-of-life/"
                  >here</a
                >.<br />
                Source code available on
                <a
                  target="_blank"
                  href="https://github.com/gilad905/life-sequencer"
                  >GitHub</a
                >.
              </p>
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-12 col-md-10 col-xl-8">
          <img
            id="patterns-img"
            src="./patterns.png"
            alt="Patterns"
            class="img-fluid"
          />
        </div>
      </div>
    </div>

    <script src="./utils.js"></script>
    <script src="./patterns.js"></script>
    <script src="./pattern-loader.js"></script>
    <script src="./gol.js"></script>
    <script src="./main.js"></script>
  </body>
</html>
